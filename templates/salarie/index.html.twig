{% extends 'base.html.twig' %}

{% block title %}Gestion des salariés{% endblock %}


{% block head %}
    Gestion des salariés
{% endblock %}



{% block body %}

<div
		class="container">

		{# Il exist une variable envirenement qui contient les infos de l'utilisateur connecte, les flashdes 
										cette variable d,enviremenet est accessible depuis toutes les routes du site
										  #}

		{% for notification in app.flashes('success') %}
			<div class="col-md-6 mx-auto text-center alert alert-success">
				{{ notification }}
			</div>
		{% endfor %}
		<a class="btn btn-success my-3" href="{{ path('salarie_ajouer') }}">Ajouter un salarié</a>

		{% if salaries %}

			<table class="table table-striped table-hover text-center mt-3">
				<thead class="bg-dark text-white">
					<tr>
						<th>ID</th>
						<th>Nom</th>
						<th>Prénom</th>
						<th>Poste</th>
						<th>Salaire (€)</th>
						<th>Date de naissance</th>
						<th>Fiche</th>
						<th>Modifier</th>
						<th>Supprimer</th>
					</tr>
				</thead>

				<tbody>
					{% for salarie in salaries %}
						<tr class="alighn-middle">
							<td>{{ salarie.id }}</td>
							<td>{{ salarie.nom |upper }}</td>
							<td>{{ salarie.prenom | capitalize }}</td>
							<td>{{ salarie.poste }}</td>
							<td>{{ salarie.salaire }}</td>
							<td>{{ salarie.datadenaissance()|date('d/m/Y') }}</td>

							<td>
								<a href="{{ path('salarie_voir', { 'id' : salarie.id }) }}">
									<i class="bi bi-eye fs-4 text-success"></i>
								</a>
							</td>

							<td>
								<a href="{{ path('salarie_modifier' , { 'id' : salarie.id }) }}">
									<i class="bi bi-pencil-square fs-4"></i>
								</a>
							</td>
							
							<td>
								<a href="{{ path('salarie_supprimer' , { 'id' : salarie.id }) }}" onclick="return confirm('Est-vous sur de vouloir supprimer ce salarie?')">
									<i class="bi bi-trash3 text-danger fs-4"></i>
								</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>

			</table>

		{% else %}
			<h4 class="text-center text-danger">Auccun résulat</h4>
		{% endif %}

	</div>

{% endblock %}
